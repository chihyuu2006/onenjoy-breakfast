<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëê¨‰Ω≥ÈÑâÁ∑ö‰∏äÈªûÈ§ê - Onenjoy</title>
    
    <!-- ÂºïÂÖ• React Âíå ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- ÂºïÂÖ• Babel Áî®ÊñºËß£Êûê JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- ÂºïÂÖ• Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Ë®≠ÂÆö Tailwind ‰∏ªÈ°åÈ°èËâ≤ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pink: {
                            50: '#fdf2f8',
                            100: '#fce7f3',
                            500: '#ec4899',
                            600: '#db2777',
                            700: '#be185d',
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Èö±ËóèÊªæÂãïÊ¢ù‰ΩÜ‰øùÁïôÂäüËÉΩ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }
        body {
            background-color: #f9fafb;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icon Components (SVG ÂÆöÁæ©) ---
        const Icon = ({ size = 24, className = "", children, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );

        const ShoppingCart = (props) => <Icon {...props}><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></Icon>;
        const Clock = (props) => <Icon {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></Icon>;
        const Activity = (props) => <Icon {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></Icon>;
        const Award = (props) => <Icon {...props}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></Icon>;
        const Plus = (props) => <Icon {...props}><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></Icon>;
        const Minus = (props) => <Icon {...props}><line x1="5" y1="12" x2="19" y2="12"/></Icon>;
        const ChevronRight = (props) => <Icon {...props}><polyline points="9 18 15 12 9 6"/></Icon>;
        const Home = (props) => <Icon {...props}><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></Icon>;
        const Coffee = (props) => <Icon {...props}><path d="M18 8h1a4 4 0 0 1 0 8h-1"/><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></Icon>;
        const Utensils = (props) => <Icon {...props}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2"/><path d="M7 2v20"/><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7"/></Icon>;
        const Ticket = (props) => <Icon {...props}><path d="M3 7v2a3 3 0 0 1 3 3 3 3 0 0 1-3 3v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1-3-3 3 3 0 0 1 3-3V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z"/></Icon>;
        const X = (props) => <Icon {...props}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></Icon>;


        // --- ‰∏ªÊáâÁî®Á®ãÂºè ---
        const OnenjoyApp = () => {
            // --- ÁãÄÊÖãÁÆ°ÁêÜ ---
            const [cart, setCart] = useState([]);
            const [currentPage, setCurrentPage] = useState('home'); 
            const [selectedCategory, setSelectedCategory] = useState('ÂÖ®ÈÉ®');
            
            // Ê®°Êì¨Ë®àÊ≠•Âô®Êï∏Êìö
            const [steps, setSteps] = useState(0);
            const [points, setPoints] = useState(0);
            const [connected, setConnected] = useState(false);
            
            // ÂÑ™ÊÉ†Âà∏ÁãÄÊÖã
            const [myCoupons, setMyCoupons] = useState([]); // Áî®Êà∂ÊìÅÊúâÁöÑÂÑ™ÊÉ†Âà∏
            const [appliedCoupon, setAppliedCoupon] = useState(null); // Áï∂ÂâçË®ÇÂñÆ‰ΩøÁî®ÁöÑÂÑ™ÊÉ†Âà∏

            // Ë®äÊÅØÊèêÁ§∫ÁãÄÊÖã
            const [toast, setToast] = useState({ show: false, message: '' });

            // È°ØÁ§∫ÊèêÁ§∫Ë®äÊÅØÁöÑÂáΩÊï∏
            const showToast = (message) => {
                setToast({ show: true, message });
                setTimeout(() => setToast({ show: false, message: '' }), 3000);
            };

            // ÂúñÁâáËºâÂÖ•Â§±ÊïóËôïÁêÜ
            const handleImageError = (e) => {
                e.target.style.display = 'none';
            };

            // --- ËèúÂñÆË≥áÊñô ---
            const categories = [
                { id: 'burger', name: 'ÁæéÂºèÊº¢Â†°', icon: 'üçî' },
                { id: 'club', name: 'Á∏ΩÂåØ‰∏âÊòéÊ≤ª', icon: 'ü•™' },
                { id: 'noodle', name: 'ÈêµÊùøÈ∫µ', icon: 'üçù' },
                { id: 'toast', name: 'ÂéöÁâáÂúüÂè∏', icon: 'üçû' },
                { id: 'danbing', name: 'ËõãÈ§ÖÁ≥ªÂàó', icon: 'üåØ' },
                { id: 'fried', name: 'ÁÇ∏Áâ©ÈªûÂøÉ', icon: 'üçü' },
                { id: 'drink', name: 'ÁâπË™øÈ£≤ÂìÅ', icon: 'ü•§' },
            ];

            const menuItems = [
                { id: 1, category: 'ÁæéÂºèÊº¢Â†°', name: 'ÊãõÁâåË±¨ËÇâÊº¢Â†°', price: 45, image: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=400&fit=crop' },
                { id: 2, category: 'ÁæéÂºèÊº¢Â†°', name: 'Âç°Âï¶ÈõûËÖøÂ†°', price: 65, image: 'https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?w=400&h=400&fit=crop' },
                { id: 3, category: 'ÁæéÂºèÊº¢Â†°', name: 'ÈÆÆËù¶ÂêâÂ£´Â†°', price: 60, image: 'https://images.unsplash.com/photo-1550547660-d9450f859349?w=400&h=400&fit=crop' },
                { id: 4, category: 'ÁæéÂºèÊº¢Â†°', name: 'ÁâõËÇâÂüπÊ†πÂ†°', price: 70, image: 'https://images.unsplash.com/photo-1553979459-d247122dd7f7?w=400&h=400&fit=crop' },
                { id: 5, category: 'ÁæéÂºèÊº¢Â†°', name: 'Ëä±ÈÜ¨ÈáåËÇåÂ†°', price: 55, image: 'https://images.unsplash.com/photo-1551782450-a2132b4ba21d?w=400&h=400&fit=crop' },
                { id: 6, category: 'Á∏ΩÂåØ‰∏âÊòéÊ≤ª', name: 'ÊãõÁâåË±¨ËÇâÁ∏ΩÂåØ', price: 65, image: 'https://images.unsplash.com/photo-1528735602780-2552fd46c7af?w=400&h=400&fit=crop' },
                { id: 7, category: 'Á∏ΩÂåØ‰∏âÊòéÊ≤ª', name: 'ÁáªÈõûÁ∏ΩÂåØ', price: 70, image: 'https://images.unsplash.com/photo-1481070414801-51fd732d7184?w=400&h=400&fit=crop' },
                { id: 8, category: 'Á∏ΩÂåØ‰∏âÊòéÊ≤ª', name: 'ÈÆ™È≠öÊ≤ôÊãâÁ∏ΩÂåØ', price: 65, image: 'https://images.unsplash.com/photo-1475090169767-40ed8d18f67d?w=400&h=400&fit=crop' },
                { id: 9, category: 'Á∏ΩÂåØ‰∏âÊòéÊ≤ª', name: 'ÈªëËÉ°Ê§íÈáåËÇåÁ∏ΩÂåØ', price: 75, image: 'https://images.unsplash.com/photo-1621800043295-a73fe2f76e2c?w=400&h=400&fit=crop' },
                { id: 10, category: 'Á∏ΩÂåØ‰∏âÊòéÊ≤ª', name: 'ËñØÈ§ÖËµ∑Âè∏Á∏ΩÂåØ', price: 60, image: 'https://images.unsplash.com/photo-1554433607-66b5efe9d304?w=400&h=400&fit=crop' },
                { id: 11, category: 'ÈêµÊùøÈ∫µ', name: 'ÈªëËÉ°Ê§íÈêµÊùøÈ∫µ', price: 45, image: 'https://images.unsplash.com/photo-1552611052-33e04de081de?w=400&h=400&fit=crop' },
                { id: 12, category: 'ÈêµÊùøÈ∫µ', name: 'ËòëËèáÈêµÊùøÈ∫µ', price: 45, image: 'https://images.unsplash.com/photo-1612929633738-8fe44f7ec841?w=400&h=400&fit=crop' },
                { id: 13, category: 'ÈêµÊùøÈ∫µ', name: 'ÂÆÆ‰øùÈõû‰∏ÅÈ∫µ', price: 55, image: 'https://images.unsplash.com/photo-1606509927625-7df1b0682247?w=400&h=400&fit=crop' },
                { id: 14, category: 'ÈêµÊùøÈ∫µ', name: 'Áæ©Â§ßÂà©ËÇâÈÜ¨È∫µ', price: 50, image: 'https://images.unsplash.com/photo-1626844131082-256783844137?w=400&h=400&fit=crop' },
                { id: 15, category: 'ÈêµÊùøÈ∫µ', name: 'Â•∂Ê≤πÂüπÊ†πÈ∫µ', price: 50, image: 'https://images.unsplash.com/photo-1612927601601-6638404737ce?w=400&h=400&fit=crop' },
                { id: 16, category: 'ÂéöÁâáÂúüÂè∏', name: 'Â∑ßÂÖãÂäõÂéöÁâá', price: 30, image: 'https://images.unsplash.com/photo-1541519227354-08fa5d50c44d?w=400&h=400&fit=crop' },
                { id: 17, category: 'ÂéöÁâáÂúüÂè∏', name: 'Ëä±ÁîüÂéöÁâá', price: 30, image: 'https://images.unsplash.com/photo-1484723091739-30a097e8f929?w=400&h=400&fit=crop' },
                { id: 18, category: 'ÂéöÁâáÂúüÂè∏', name: 'Â•∂ÈÖ•ÂéöÁâá', price: 35, image: 'https://images.unsplash.com/photo-1584776296906-6af761f60ca4?w=400&h=400&fit=crop' },
                { id: 19, category: 'ÂéöÁâáÂúüÂè∏', name: 'È¶ôËíúÂéöÁâá', price: 30, image: 'https://images.unsplash.com/photo-1619860860774-1e2e17343432?w=400&h=400&fit=crop' },
                { id: 20, category: 'ÂéöÁâáÂúüÂè∏', name: 'ËçâËéìÂéöÁâá', price: 30, image: 'https://images.unsplash.com/photo-1495147466023-ac5c588e2e94?w=400&h=400&fit=crop' },
                { id: 21, category: 'ËõãÈ§ÖÁ≥ªÂàó', name: 'ÂéüÂë≥ËõãÈ§Ö', price: 25, image: 'https://images.unsplash.com/photo-1525351453334-e57d5471a9a8?w=400&h=400&fit=crop' },
                { id: 22, category: 'ËõãÈ§ÖÁ≥ªÂàó', name: 'ÁéâÁ±≥ËõãÈ§Ö', price: 35, image: 'https://images.unsplash.com/photo-1587314168485-3236d6710814?w=400&h=400&fit=crop' },
                { id: 23, category: 'ËõãÈ§ÖÁ≥ªÂàó', name: 'Ëµ∑Âè∏ËõãÈ§Ö', price: 35, image: 'https://images.unsplash.com/photo-1510693206972-df098062cb71?w=400&h=400&fit=crop' },
                { id: 24, category: 'ËõãÈ§ÖÁ≥ªÂàó', name: 'ÈÆ™È≠öËõãÈ§Ö', price: 40, image: 'https://images.unsplash.com/photo-1533089862017-ec79e5d44a2c?w=400&h=400&fit=crop' },
                { id: 25, category: 'ËõãÈ§ÖÁ≥ªÂàó', name: 'ÂüπÊ†πËõãÈ§Ö', price: 40, image: 'https://images.unsplash.com/photo-1525351453334-e57d5471a9a8?w=400&h=400&fit=crop' },
                { id: 26, category: 'ÁÇ∏Áâ©ÈªûÂøÉ', name: 'È∫•ÂÖãÈõûÂ°ä', price: 35, image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=400&h=400&fit=crop' },
                { id: 27, category: 'ÁÇ∏Áâ©ÈªûÂøÉ', name: 'ÈªÉÈáëËÑÜËñØ', price: 35, image: 'https://images.unsplash.com/photo-1573080496987-a199f8cd75ec?w=400&h=400&fit=crop' },
                { id: 28, category: 'ÁÇ∏Áâ©ÈªûÂøÉ', name: 'ÁÜ±Áãó(3Ê¢ù)', price: 20, image: 'https://images.unsplash.com/photo-1599599810769-bcde5a45b5f6?w=400&h=400&fit=crop' },
                { id: 29, category: 'ÁÇ∏Áâ©ÈªûÂøÉ', name: '‰∏âËßíËñØÈ§Ö', price: 25, image: 'https://images.unsplash.com/photo-1603569283847-aa295f0d016a?w=400&h=400&fit=crop' },
                { id: 30, category: 'ÁÇ∏Áâ©ÈªûÂøÉ', name: 'Ê™∏Ê™¨ÈõûÊü≥Ê¢ù', price: 40, image: 'https://images.unsplash.com/photo-1562967914-608f82629710?w=400&h=400&fit=crop' },
                { id: 31, category: 'ÁâπË™øÈ£≤ÂìÅ', name: 'Ëê¨‰Ω≥ÈÑâÁ¥ÖËå∂', price: 20, image: 'https://images.unsplash.com/photo-1525351326368-efbbad4878ae?w=400&h=400&fit=crop' },
                { id: 32, category: 'ÁâπË™øÈ£≤ÂìÅ', name: 'ÊãõÁâåÂ•∂Ëå∂', price: 25, image: 'https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400&h=400&fit=crop' },
                { id: 33, category: 'ÁâπË™øÈ£≤ÂìÅ', name: 'ÈùûÂü∫ÊîπË±ÜÊºø', price: 20, image: 'https://images.unsplash.com/photo-1600093463592-8e36ae95ef56?w=400&h=400&fit=crop' },
                { id: 34, category: 'ÁâπË™øÈ£≤ÂìÅ', name: 'Á†îÁ£®ÂíñÂï°', price: 45, image: 'https://images.unsplash.com/photo-1541167760496-1628856ab772?w=400&h=400&fit=crop' },
                { id: 35, category: 'ÁâπË™øÈ£≤ÂìÅ', name: 'ÈÆÆÊ©ôÊ±Å', price: 35, image: 'https://images.unsplash.com/photo-1613478223719-2ab802602423?w=400&h=400&fit=crop' },
            ];

            // ÁçéÂãµÊ∏ÖÂñÆÈÖçÁΩÆ
            const rewardsList = [
                { id: 'c5', cost: 50, title: '5ÂÖÉ ÊäòÂÉπÂà∏', desc: 'Êªø $50 ÂèØ‰ΩøÁî®', value: 5 },
                { id: 'tea', cost: 100, title: 'ÂÖçË≤ª Ëê¨‰Ω≥ÈÑâÁ¥ÖËå∂', desc: '‰∏çÈôêÈáëÈ°çÊ∂àË≤ªÂèØÂÖåÊèõ', value: 20 },
                { id: 'pancake', cost: 300, title: 'ÂÖçË≤ª ÂéüÂë≥ËõãÈ§Ö', desc: 'Êó©È§êÂøÖÂÇôËâØ‰º¥', value: 25 },
            ];

            // --- ÂäüËÉΩÂáΩÊï∏ ---

            const addToCart = (item) => {
                setCart(prev => {
                    const existing = prev.find(i => i.id === item.id);
                    if (existing) {
                        return prev.map(i => i.id === item.id ? { ...i, qty: i.qty + 1 } : i);
                    }
                    return [...prev, { ...item, qty: 1 }];
                });
                showToast(`Â∑≤Âä†ÂÖ• ${item.name}`);
            };

            const updateQty = (id, delta) => {
                setCart(prev => prev.map(item => {
                    if (item.id === id) {
                        return { ...item, qty: Math.max(0, item.qty + delta) };
                    }
                    return item;
                }).filter(i => i.qty > 0));
            };

            // Ë≥ºÁâ©ËªäÈáëÈ°çË®àÁÆó
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
            const discountAmount = appliedCoupon ? appliedCoupon.value : 0;
            const finalTotal = Math.max(0, subtotal - discountAmount);
            const cartCount = cart.reduce((sum, item) => sum + item.qty, 0);

            // ÂÖåÊèõÂÑ™ÊÉ†Âà∏
            const redeemReward = (reward) => {
                if (points >= reward.cost) {
                    setPoints(prev => prev - reward.cost);
                    const newCoupon = { ...reward, uniqueId: Date.now() + Math.random() }; // Â¢ûÂä†ÂîØ‰∏ÄID‰ª•ÂÖÅË®±ÈáçË§áÂÖåÊèõ
                    setMyCoupons(prev => [...prev, newCoupon]);
                    showToast(`ÂÖåÊèõÊàêÂäüÔºÅÁç≤Âæó ${reward.title}`);
                }
            };

            // Ê®°Êì¨Ë®àÊ≠•Âô®ÈÄ£Êé•
            const connectPedometer = () => {
                if (!connected) {
                    setConnected(true);
                    // Ê®°Êì¨Áç≤ÂèñÊï∏Êìö
                    const randomSteps = Math.floor(Math.random() * 5000) + 2000;
                    setSteps(randomSteps);
                    setPoints(Math.floor(randomSteps / 100)); // 100Ê≠• = 1Èªû
                    showToast("Ë£ùÁΩÆÈÄ£Êé•ÊàêÂäüÔºÅ");
                }
            };

            const syncSteps = () => {
                if(connected) {
                    const addedSteps = Math.floor(Math.random() * 1000);
                    setSteps(prev => prev + addedSteps);
                    setPoints(prev => prev + Math.floor(addedSteps / 100));
                    showToast(`ÂêåÊ≠•ÊàêÂäüÔºÅÊñ∞Â¢û ${addedSteps} Ê≠•`);
                }
            };

            // --- È†ÅÈù¢ÁµÑ‰ª∂ ---

            const Header = () => (
                <header className="fixed top-0 left-0 right-0 bg-pink-600 text-white shadow-md z-50">
                    <div className="max-w-7xl mx-auto px-4 h-16 flex items-center justify-between">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setCurrentPage('home')}>
                            <div className="bg-white text-pink-600 p-1.5 rounded-full font-bold text-xl">On</div>
                            <h1 className="font-bold text-xl tracking-wide">Ëê¨‰Ω≥ÈÑâ</h1>
                        </div>
                        
                        <div className="flex items-center gap-4">
                            <button onClick={() => setCurrentPage('rewards')} className="relative p-2 hover:bg-pink-700 rounded-full transition-colors">
                                <Activity size={24} />
                                {points > 0 && <span className="absolute -top-1 -right-1 bg-yellow-400 text-pink-900 text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center">{points}</span>}
                            </button>
                            
                            <button onClick={() => setCurrentPage('checkout')} className="relative p-2 hover:bg-pink-700 rounded-full transition-colors">
                                <ShoppingCart size={24} />
                                {cartCount > 0 && (
                                    <span className="absolute -top-1 -right-1 bg-white text-pink-600 text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center animate-bounce">
                                        {cartCount}
                                    </span>
                                )}
                            </button>
                        </div>
                    </div>
                </header>
            );

            const Hero = () => (
                <div className="bg-gradient-to-br from-pink-500 to-rose-600 text-white pt-24 pb-12 px-6 rounded-b-[2.5rem] shadow-xl mb-6">
                    <div className="max-w-4xl mx-auto">
                        <h2 className="text-3xl font-bold mb-2">Êó©ÂÆâÔºÅ‰ªäÂ§©ÊÉ≥ÂêÉÈªû‰ªÄÈ∫ºÔºü</h2>
                        <p className="opacity-90 mb-6">ÁæéÂ•ΩÁöÑ‰∏ÄÂ§©ÔºåÂæûËê¨‰Ω≥ÈÑâÈñãÂßã„ÄÇ</p>
                        
                        <div className="flex flex-col md:flex-row gap-4">
                            <div className="bg-white/10 backdrop-blur-md rounded-xl p-4 flex items-center justify-between border border-white/20 cursor-pointer hover:bg-white/20 transition flex-1" onClick={() => setCurrentPage('rewards')}>
                                <div className="flex items-center gap-3">
                                    <div className="bg-white p-2 rounded-full text-pink-500">
                                        <Activity size={24} />
                                    </div>
                                    <div>
                                        <p className="text-sm font-medium opacity-90">Ëµ∞Ë∑ØË≥∫Êó©È§ê</p>
                                        <p className="font-bold text-lg">{connected ? `${steps} Ê≠•` : 'Â∞öÊú™ÈÄ£Êé•Ë£ùÁΩÆ'}</p>
                                    </div>
                                </div>
                                <ChevronRight />
                            </div>

                            <button 
                                onClick={() => setCurrentPage('menu')}
                                className="flex-1 bg-white text-pink-600 font-bold py-3.5 rounded-full shadow-lg hover:bg-gray-50 active:scale-95 transition-all flex items-center justify-center gap-2"
                            >
                                <Utensils size={20} />
                                ÈñãÂßãÈªûÈ§ê
                            </button>
                        </div>
                    </div>
                </div>
            );

            const MenuPage = () => {
                const filteredItems = selectedCategory === 'ÂÖ®ÈÉ®' 
                    ? menuItems 
                    : menuItems.filter(item => item.category === selectedCategory);

                return (
                    <div className="pt-20 pb-24 px-4 max-w-7xl mx-auto w-full">
                        <h2 className="text-2xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                            <span className="bg-pink-100 text-pink-600 p-1 rounded">Menu</span> ÂÖ®Á≥ªÂàóËèúÂñÆ
                        </h2>
                        
                        {/* Category Scroll */}
                        <div className="flex gap-2 overflow-x-auto pb-4 mb-2 no-scrollbar">
                            <button 
                                onClick={() => setSelectedCategory('ÂÖ®ÈÉ®')}
                                className={`whitespace-nowrap px-4 py-2 rounded-full text-sm font-bold transition-all ${
                                    selectedCategory === 'ÂÖ®ÈÉ®' 
                                        ? 'bg-pink-600 text-white shadow-md' 
                                        : 'bg-white text-gray-500 border border-gray-200'
                                }`}
                            >
                                ÂÖ®ÈÉ®
                            </button>
                            {categories.map(cat => (
                                <button
                                    key={cat.id}
                                    onClick={() => setSelectedCategory(cat.name)}
                                    className={`whitespace-nowrap px-4 py-2 rounded-full text-sm font-bold transition-all flex items-center gap-1 ${
                                        selectedCategory === cat.name 
                                            ? 'bg-pink-600 text-white shadow-md' 
                                            : 'bg-white text-gray-500 border border-gray-200'
                                    }`}
                                >
                                    <span>{cat.icon}</span> {cat.name}
                                </button>
                            ))}
                        </div>

                        {/* Menu Grid - Responsive Layout */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                            {filteredItems.map(item => (
                                <div key={item.id} className="bg-white p-4 rounded-xl shadow-sm border border-pink-50 flex justify-between items-center group hover:border-pink-200 transition-all cursor-pointer" onClick={() => addToCart(item)}>
                                    <div className="flex items-center gap-4 w-full">
                                        <div className="w-24 h-24 shrink-0">
                                            <img 
                                                src={item.image} 
                                                alt={item.name} 
                                                className="w-full h-full object-cover rounded-lg bg-gray-100 shadow-sm"
                                                onError={handleImageError}
                                            />
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <h3 className="font-bold text-gray-800 truncate">{item.name}</h3>
                                            <p className="text-pink-600 font-bold mt-1">${item.price}</p>
                                        </div>
                                        <button 
                                            onClick={(e) => { e.stopPropagation(); addToCart(item); }}
                                            className="bg-pink-100 text-pink-600 p-2 rounded-full hover:bg-pink-600 hover:text-white transition-colors active:scale-90 shrink-0"
                                        >
                                            <Plus size={20} />
                                        </button>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            const RewardsPage = () => (
                <div className="pt-20 pb-24 px-4 max-w-2xl mx-auto">
                    <div className="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg mb-6 relative overflow-hidden">
                        <div className="relative z-10">
                            <div className="flex justify-between items-start mb-4">
                                <div>
                                    <p className="text-indigo-100 text-sm">ÁõÆÂâçÁöÑÊ≠•Êï∏</p>
                                    <h2 className="text-4xl font-bold mt-1">{steps.toLocaleString()}</h2>
                                </div>
                                <div className="bg-white/20 p-2 rounded-lg backdrop-blur">
                                    <Activity size={32} />
                                </div>
                            </div>
                            <div className="flex items-center gap-2 mb-4">
                                <Award className="text-yellow-300" />
                                <span className="font-bold">{points} Á©çÂàÜ</span> (100Ê≠• = 1ÂàÜ)
                            </div>
                            
                            {!connected ? (
                                <button 
                                    onClick={connectPedometer}
                                    className="w-full bg-white text-indigo-600 py-3 rounded-xl font-bold shadow hover:bg-gray-50 transition-colors"
                                >
                                    ÈÄ£ÁµêË®àÊ≠•Âô®
                                </button>
                            ) : (
                                <button 
                                    onClick={syncSteps}
                                    className="w-full bg-indigo-700/50 border border-indigo-400/30 text-white py-3 rounded-xl font-bold shadow hover:bg-indigo-700 transition-colors"
                                >
                                    ÂêåÊ≠•ÊúÄÊñ∞Ê≠•Êï∏
                                </button>
                            )}
                        </div>
                        {/* Decorative Circles */}
                        <div className="absolute -top-10 -right-10 w-40 h-40 bg-purple-400/30 rounded-full blur-2xl"></div>
                        <div className="absolute -bottom-10 -left-10 w-40 h-40 bg-indigo-400/30 rounded-full blur-2xl"></div>
                    </div>

                    <div className="mb-6">
                        <h3 className="font-bold text-gray-800 text-lg mb-2">ÊàëÁöÑÂÑ™ÊÉ†Âà∏Âå£ ({myCoupons.length})</h3>
                        {myCoupons.length === 0 ? (
                            <div className="text-sm text-gray-400 bg-gray-50 p-4 rounded-lg text-center">ÁõÆÂâçÊ≤íÊúâÂèØÁî®ÁöÑÂÑ™ÊÉ†Âà∏ÔºåÂø´ÂéªÂÖåÊèõÂêßÔºÅ</div>
                        ) : (
                            <div className="grid grid-cols-2 gap-2">
                                {myCoupons.map((coupon) => (
                                    <div key={coupon.uniqueId} className="bg-pink-50 border border-pink-100 p-3 rounded-lg flex items-center justify-between">
                                        <div className="text-sm font-bold text-pink-700">{coupon.title}</div>
                                        <Ticket size={16} className="text-pink-400" />
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>

                    <h3 className="font-bold text-gray-800 text-lg mb-4">Á©çÂàÜÂÖåÊèõÂ∞àÂçÄ</h3>
                    <div className="space-y-4">
                        {rewardsList.map((reward, idx) => (
                            <div key={idx} className="bg-white border border-gray-100 rounded-xl p-4 shadow-sm flex justify-between items-center">
                                <div>
                                    <h4 className="font-bold text-gray-800">{reward.title}</h4>
                                    <p className="text-gray-500 text-sm">{reward.desc}</p>
                                </div>
                                <button 
                                    disabled={points < reward.cost}
                                    onClick={() => redeemReward(reward)}
                                    className={`px-4 py-2 rounded-lg font-bold text-sm ${
                                        points >= reward.cost 
                                            ? 'bg-pink-600 text-white hover:bg-pink-700' 
                                            : 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                    }`}
                                >
                                    {reward.cost} ÈªûÂÖåÊèõ
                                </button>
                            </div>
                        ))}
                    </div>
                </div>
            );

            const CheckoutPage = () => {
                const [name, setName] = useState('');
                const [time, setTime] = useState('');
                const [orderPlaced, setOrderPlaced] = useState(false);

                if (orderPlaced) {
                    return (
                        <div className="h-screen flex flex-col items-center justify-center p-6 text-center bg-white">
                            <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-6 text-green-500">
                                <Award size={40} />
                            </div>
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">Ë®ÇÂñÆÂ∑≤ÈÄÅÂá∫ÔºÅ</h2>
                            <p className="text-gray-500 mb-8">Ë´ãÊñº {time} Âà∞Â∫óÂèñÈ§êÔºåÂà•ÈÅ≤Âà∞ÂõâÔºÅ</p>
                            <div className="bg-gray-50 p-6 rounded-xl w-full max-w-sm mb-8 text-left mx-auto">
                                <h3 className="font-bold border-b pb-2 mb-2">Ë®ÇÂñÆÊëòË¶Å</h3>
                                {cart.map(item => (
                                    <div key={item.id} className="flex justify-between text-sm mb-1">
                                        <span>{item.name} x{item.qty}</span>
                                        <span>${item.price * item.qty}</span>
                                    </div>
                                ))}
                                {appliedCoupon && (
                                    <div className="flex justify-between text-sm mb-1 text-green-600 font-bold">
                                        <span>ÂÑ™ÊÉ†Âà∏ÊäòÊâ£ ({appliedCoupon.title})</span>
                                        <span>-${appliedCoupon.value}</span>
                                    </div>
                                )}
                                <div className="border-t pt-2 mt-2 flex justify-between font-bold text-pink-600">
                                    <span>Á∏ΩË®à</span>
                                    <span>${finalTotal}</span>
                                </div>
                            </div>
                            <button 
                                onClick={() => {
                                    setCart([]);
                                    setOrderPlaced(false);
                                    setAppliedCoupon(null); // Ê∏ÖÈô§Â∑≤‰ΩøÁî®ÁöÑÂÑ™ÊÉ†Âà∏
                                    // ÂØ¶ÈöõÁßªÈô§Ë©≤ÂÑ™ÊÉ†Âà∏ (Á∞°ÂñÆÊ®°Êì¨: ÁßªÈô§Á¨¨‰∏ÄÂÄãÂåπÈÖçÁöÑ)
                                    if (appliedCoupon) {
                                        setMyCoupons(prev => prev.filter(c => c.uniqueId !== appliedCoupon.uniqueId));
                                    }
                                    setCurrentPage('home');
                                }}
                                className="w-full max-w-sm bg-pink-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-pink-700"
                            >
                                ÂõûÂà∞È¶ñÈ†Å
                            </button>
                        </div>
                    );
                }

                return (
                    <div className="pt-20 pb-24 px-4 max-w-6xl mx-auto w-full">
                        <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                            <ShoppingCart className="text-pink-600" /> ÊÇ®ÁöÑË®ÇÂñÆ
                        </h2>

                        {cart.length === 0 ? (
                            <div className="text-center py-10 text-gray-400">
                                <Coffee size={48} className="mx-auto mb-4 opacity-50" />
                                <p>Ë≥ºÁâ©ËªäÊòØÁ©∫ÁöÑÔºåÂø´ÂéªÈªûÈ§êÂêßÔºÅ</p>
                                <button 
                                    onClick={() => setCurrentPage('menu')}
                                    className="mt-6 bg-pink-100 text-pink-600 px-6 py-2 rounded-full font-bold hover:bg-pink-200"
                                >
                                    ÂéªÈªûÈ§ê
                                </button>
                            </div>
                        ) : (
                            <div className="flex flex-col md:flex-row gap-6 items-start">
                                {/* Â∑¶ÂÅ¥ÔºöË≥ºÁâ©ËªäÊ∏ÖÂñÆ */}
                                <div className="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6 w-full flex-1">
                                    {cart.map(item => (
                                        <div key={item.id} className="p-4 border-b border-gray-100 flex justify-between items-center">
                                            <div className="flex items-center gap-3">
                                                <div className="w-16 h-16 shrink-0">
                                                    <img 
                                                        src={item.image} 
                                                        alt={item.name} 
                                                        className="w-full h-full object-cover rounded-lg bg-gray-100" 
                                                        onError={handleImageError}
                                                    />
                                                </div>
                                                <div>
                                                    <h4 className="font-bold text-gray-800">{item.name}</h4>
                                                    <p className="text-gray-500 text-sm">${item.price}</p>
                                                </div>
                                            </div>
                                            <div className="flex items-center gap-3 bg-gray-50 rounded-lg p-1">
                                                <button onClick={() => updateQty(item.id, -1)} className="p-1 hover:bg-white rounded shadow-sm text-gray-600"><Minus size={14} /></button>
                                                <span className="font-bold w-4 text-center text-sm">{item.qty}</span>
                                                <button onClick={() => updateQty(item.id, 1)} className="p-1 hover:bg-white rounded shadow-sm text-green-600"><Plus size={14} /></button>
                                            </div>
                                        </div>
                                    ))}
                                    
                                    {/* ÂÑ™ÊÉ†Âà∏ÈÅ∏ÊìáÂçÄÂ°ä */}
                                    <div className="p-4 bg-gray-50 border-t border-gray-100">
                                        <h4 className="font-bold text-gray-700 mb-2 flex items-center gap-2">
                                            <Ticket size={18} /> ‰ΩøÁî®ÂÑ™ÊÉ†Âà∏
                                        </h4>
                                        {myCoupons.length === 0 ? (
                                            <div className="text-sm text-gray-400">ÊÇ®ÁõÆÂâçÊ≤íÊúâÂèØÁî®ÁöÑÂÑ™ÊÉ†Âà∏</div>
                                        ) : (
                                            <div className="flex flex-wrap gap-2">
                                                {myCoupons.map(coupon => (
                                                    <button
                                                        key={coupon.uniqueId}
                                                        onClick={() => setAppliedCoupon(appliedCoupon?.uniqueId === coupon.uniqueId ? null : coupon)}
                                                        className={`px-3 py-2 rounded-lg text-sm border font-bold transition-all flex items-center gap-1 ${
                                                            appliedCoupon?.uniqueId === coupon.uniqueId 
                                                                ? 'bg-pink-600 text-white border-pink-600' 
                                                                : 'bg-white text-gray-600 border-gray-200 hover:border-pink-300'
                                                        }`}
                                                    >
                                                        {coupon.title}
                                                        {appliedCoupon?.uniqueId === coupon.uniqueId && <X size={14} />}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>

                                    <div className="p-4 bg-pink-50">
                                        <div className="flex justify-between items-center mb-1 text-gray-600 text-sm">
                                            <span>Â∞èË®à</span>
                                            <span>${subtotal}</span>
                                        </div>
                                        {appliedCoupon && (
                                            <div className="flex justify-between items-center mb-2 text-green-600 text-sm font-bold">
                                                <span>ÊäòÊâ£ ({appliedCoupon.title})</span>
                                                <span>-${appliedCoupon.value}</span>
                                            </div>
                                        )}
                                        <div className="flex justify-between items-center border-t border-pink-200 pt-2">
                                            <span className="font-bold text-gray-700">Á∏ΩÈáëÈ°ç</span>
                                            <span className="font-bold text-2xl text-pink-600">${finalTotal}</span>
                                        </div>
                                    </div>
                                </div>

                                {/* Âè≥ÂÅ¥ÔºöÁµêÂ∏≥Ë°®ÂñÆ (Desktop Sticky) */}
                                <div className="w-full md:w-96 shrink-0 md:sticky md:top-24">
                                    <div className="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
                                        <h3 className="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                            <Clock size={18} className="text-pink-600" /> ÂèñÈ§êË≥áË®ä
                                        </h3>
                                        
                                        <div className="space-y-4">
                                            <div>
                                                <label className="block text-sm text-gray-500 mb-1">ÊÇ®ÁöÑÁ®±Âëº (ÂÖçÁôªÂÖ•)</label>
                                                <input 
                                                    type="text" 
                                                    placeholder="‰æãÔºöÁéãÂÖàÁîü"
                                                    className="w-full p-3 bg-gray-50 rounded-lg border-transparent focus:border-pink-500 focus:bg-white focus:ring-0 transition-all outline-none"
                                                    value={name}
                                                    onChange={(e) => setName(e.target.value)}
                                                />
                                            </div>
                                            <div>
                                                <label className="block text-sm text-gray-500 mb-1">È†êË®àÂèñÈ§êÊôÇÈñì</label>
                                                <input 
                                                    type="time" 
                                                    className="w-full p-3 bg-gray-50 rounded-lg border-transparent focus:border-pink-500 focus:bg-white focus:ring-0 transition-all outline-none"
                                                    value={time}
                                                    onChange={(e) => setTime(e.target.value)}
                                                />
                                            </div>
                                        </div>

                                        <button 
                                            onClick={() => {
                                                if(!name || !time) return showToast('Ë´ãËº∏ÂÖ•Á®±ÂëºËàáÂèñÈ§êÊôÇÈñì');
                                                setOrderPlaced(true);
                                            }}
                                            className="w-full mt-6 bg-pink-600 text-white py-4 rounded-xl font-bold shadow-lg shadow-pink-200 hover:bg-pink-700 active:scale-95 transition-all flex items-center justify-center gap-2"
                                        >
                                            Á¢∫Ë™ç‰∏ãÂñÆ <ChevronRight size={18} />
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                );
            };

            const BottomNav = () => (
                <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center h-16 pb-safe z-40 max-w-7xl mx-auto">
                    <button 
                        onClick={() => setCurrentPage('home')}
                        className={`flex flex-col items-center justify-center w-full h-full ${currentPage === 'home' ? 'text-pink-600' : 'text-gray-400'}`}
                    >
                        <Home size={24} />
                        <span className="text-[10px] font-bold mt-1">È¶ñÈ†Å</span>
                    </button>
                    <button 
                        onClick={() => setCurrentPage('menu')}
                        className={`flex flex-col items-center justify-center w-full h-full ${currentPage === 'menu' ? 'text-pink-600' : 'text-gray-400'}`}
                    >
                        <Utensils size={24} />
                        <span className="text-[10px] font-bold mt-1">ËèúÂñÆ</span>
                    </button>
                    <button 
                        onClick={() => setCurrentPage('rewards')}
                        className={`flex flex-col items-center justify-center w-full h-full ${currentPage === 'rewards' ? 'text-pink-600' : 'text-gray-400'}`}
                    >
                        <Activity size={24} />
                        <span className="text-[10px] font-bold mt-1">ÂÅ•Â∫∑</span>
                    </button>
                    <button 
                        onClick={() => setCurrentPage('checkout')}
                        className={`flex flex-col items-center justify-center w-full h-full ${currentPage === 'checkout' ? 'text-pink-600' : 'text-gray-400'}`}
                    >
                        <div className="relative">
                            <ShoppingCart size={24} />
                            {cartCount > 0 && <span className="absolute -top-1 -right-2 bg-pink-600 text-white text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center">{cartCount}</span>}
                        </div>
                        <span className="text-[10px] font-bold mt-1">Ë≥ºÁâ©Ëªä</span>
                    </button>
                </div>
            );

            // ÊèêÁ§∫Ë®äÊÅØÁµÑ‰ª∂ (Toast)
            const Toast = () => (
                <div 
                    className={`fixed top-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-lg z-[60] transition-all duration-300 pointer-events-none flex items-center gap-2 ${
                        toast.show ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-4'
                    }`}
                >
                   <span>{toast.message}</span>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-50 font-sans text-gray-800 pb-20">
                    <Header />
                    <Toast />
                    
                    <div className="max-w-7xl mx-auto min-h-screen bg-white shadow-2xl overflow-hidden relative pb-24">
                        {currentPage === 'home' && (
                            <>
                                <Hero />
                                <div className="px-6">
                                    <h3 className="font-bold text-gray-800 mb-4 text-lg">ÁÜ±ÈñÄÊé®Ëñ¶</h3>
                                    <div className="flex gap-4 overflow-x-auto pb-4 no-scrollbar">
                                        {menuItems.slice(0, 4).map(item => (
                                            <div key={item.id} className="min-w-[140px] bg-white border border-gray-100 rounded-xl p-3 shadow-sm cursor-pointer hover:border-pink-200 transition" onClick={() => addToCart(item)}>
                                                <div className="h-24 mb-2 overflow-hidden rounded-lg">
                                                    <img 
                                                        src={item.image} 
                                                        alt={item.name} 
                                                        className="w-full h-full object-cover" 
                                                        onError={handleImageError}
                                                    />
                                                </div>
                                                <h4 className="font-bold text-sm truncate">{item.name}</h4>
                                                <p className="text-pink-600 font-bold text-sm">${item.price}</p>
                                                <button className="w-full mt-2 bg-pink-50 text-pink-600 text-xs font-bold py-1 rounded">Âä†ÂÖ• +</button>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                
                                <div className="px-6 mt-4 mb-8">
                                    <div 
                                        onClick={() => setCurrentPage('menu')}
                                        className="bg-gray-800 text-white rounded-xl p-6 flex justify-between items-center cursor-pointer hover:bg-gray-700 transition"
                                    >
                                        <div>
                                            <h3 className="font-bold text-xl">ÂÆåÊï¥ËèúÂñÆ</h3>
                                            <p className="text-gray-400 text-sm">7Â§ßÈ°ûÂà•ÔºåË∂ÖÈÅé30Á®ÆÈÅ∏Êìá</p>
                                        </div>
                                        <ChevronRight />
                                    </div>
                                </div>
                            </>
                        )}

                        {currentPage === 'menu' && <MenuPage />}
                        {currentPage === 'rewards' && <RewardsPage />}
                        {currentPage === 'checkout' && <CheckoutPage />}
                    </div>
                    
                    <BottomNav />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OnenjoyApp />);
    </script>
</body>
</html>